<h5 class="p-1">Projects List</h5>
<hr/>
<form class="row gx-3 align-items-center py-5" (ngSubmit)="fetch()">
    <div class="col-5">
        <label class="visually-hidden" for="searchInput">Project number, name, customer name</label>
        <input [(ngModel)]="globalFilter" [ngModelOptions]="{standalone: true}" type="text" class="form-control" id="searchInput" placeholder="Project number, name, customer name">
    </div>
    <!-- ngModel="globalFilter" [value]="globalFilter"  -->
    <div class="col-3">
        <label class="visually-hidden" for="projectStatus">Project status</label>
        <select [(ngModel)]="status" [ngModelOptions]="{standalone: true}" class="form-select" id="projectStatus">
            <option selected hidden>Project status</option>
            <option value="NEW">New</option>
            <option value="PLA">Planned</option>
            <option value="INP">In progress</option>
            <option value="FIN">Finished</option>
        </select>
        <!-- ngModel="status"  -->
    </div>
    <div class="col-2 px-3">
        <button type="submit" class="btn btn-primary" (click)="fetch()">Search project</button>
    </div>
    <div class="col-1">
        <button type="reset" class="btn btn-light">Reset</button>
    </div>
</form>

<div class="mat-elevation-z8">
<table mat-table #table [dataSource]="dataSource">
    <ng-container matColumnDef="projectNumber">
      <th mat-header-cell *matHeaderCellDef>Number</th>
      <td mat-cell *matCellDef="let element">{{element.projectNumber}}</td>
    </ng-container>
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let element"> {{element.name}} </td>
    </ng-container>
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef>Status</th>
      <td mat-cell *matCellDef="let element"> {{element.status}} </td>
    </ng-container>
    <ng-container matColumnDef="customer">
      <th mat-header-cell *matHeaderCellDef>Customer</th>
      <td mat-cell *matCellDef="let element"> {{element.customer}} </td>
    </ng-container>
    <ng-container matColumnDef="startDate">
        <th mat-header-cell *matHeaderCellDef>Start date</th>
        <td mat-cell *matCellDef="let element"> {{element.startDate}} </td>
    </ng-container>
    <ng-container matColumnDef="delete">
        <th mat-header-cell *matHeaderCellDef>Delete</th>
        <td mat-cell *matCellDef="let element">
            <div *ngIf="element.status == 'NEW'">
                <button mat-icon-button color="warn" aria-label="Delete" (click)="delete(element.id)">
                    <mat-icon>delete</mat-icon>
                </button>
            </div>
        </td>
    </ng-container>
    <ng-container matColumnDef="edit">
        <th mat-header-cell *matHeaderCellDef>Edit</th>
        <td mat-cell *matCellDef="let element">
            <button mat-icon-button aria-label="Edit" (click)="edit(element.id)">
                <mat-icon>edit</mat-icon>
            </button>
        </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>
<mat-paginator #paginator
    [length]="projects.length"
    [pageSize]="5"
    [pageSizeOptions]="[5, 10, 25, 100]"
    aria-label="Select page">
</mat-paginator>
</div>